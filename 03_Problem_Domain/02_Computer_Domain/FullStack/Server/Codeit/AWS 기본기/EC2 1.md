## Express 서버  구축하기
만들어둔 EC2에서 노드와 익스프레이스 를 설치해준다.
여튼  기본적인 코드를 작성해준다. (npm init, git ini etc... server.js)

 ec2가 http요청을 받기위해서는 설정을해줘야한다.
 보안 >  인바운드 규칙 편집 > 포트 범위 설정(80> 3000 마음대로 (보통 80을 쓰는게 정석적이다.))
## 인스턴스에 파일 옮기기
필요에 따라 내가 이미 가지고 있는 코드를 인스턴스에 복사할 수 있다.
예 > scp -i path/to/my/key.pem /path/to/my/file ec2-user@instance-public-ip:
> ssh에서 -i  는  신원을 의미한다.
> 한칸 띄고 내가 복사하고 싶은 파일의  경로를 써주고
> 마지막으로 퍼블릭 IP주소를 "유저네임@퍼블릭 IP주소" 형식으로 써준다.
> 기본 이름은  ec2-usre(AMI설정에 따라 다른 유저네임일수도) 인스턴스 퍼블릭IP주소 뒤에 꼭 세미콜론을 붙여준다.

파일하나가 아니라 통쨰로 복사하고 싶을 경우
> scp -i path/to/my/key.pem -r /path/to/my/folder ec2-user@instance-public-ip:
용량이 큰 node_modules는 삭제하고 복사하는게 일반적이다. package.json 이있게에 npm install하면 되겠죠

## 인스턴스 중지, 종료하기
인스턴스가 실행중일때야 사용량이 차감된다. 사용하지않는  인스턴스는 종료시켜야한다.
중지는 다시 재사용할수있게 중단하는것이다.  기존의 퍼블릭IP가 달라져서 이 퍼블릭IP를 사용한서비스의  IP를 업데이트해야한다는  점이다.
종료는  영구적으로 삭제되고  백업하지않은 데이터는 날아간다.
인스턴스 상태에서 변경할수있다.

## EC2 과금 정책
**온 디멘드 요금제**
Pay-as-you-go 당신이 사용한만큼만 비용을 지불하세요 라는 뜻이다.
딱필요한 만큼 사용하고 요금을 내기에 온디멘드라고 한다.

**스팟 인스턴스 요금제**
'경매 방식의  요금제'
가격 입찰하고 , 입찰에  성공한 사람이 EC2인스턴스를 사용할 수 있게 되는 것이 스팟 인스턴스 요금제이다. 인스턴스 유형에따라 온디멘드 방식의 최대90%까지  비용을 절감시킬수있다.

다만 한가지 단점이있다.
사용 중에 방해를  받을수있다. 더 높은 가격을 제시한 입찰자가 생기면 스팟 인스턴스를 회수하기도한다. 즉 인스턴스 안의 내용도 별도로 백업해두지 않으면 잃게된다.
> 언제 회수될지 모른다는  위험성이 존재한다..
> 대신 고성능 그래픽 작업이나 머신러닝 작업과 같이 인스턴스 수가 더많이 있으면 좋지만, 인스턴스 중 몇개가 갑자기 사라져도 큰 상관없는 경우 스팟 인스턴스를 사용해도 좋다.

**예약  인스턴스 요금제**
장기간 할인된 가격에  이용한다. 1년 선구독하면 가격을 할인해주는 스트리밍 서비스 정책과 비슷하다.
이 요금제는 "타입","결제 조건" 에 따라 달라진다.

**타입**
1. 표준:  사용 중인 인스턴스 크기(t3.large -> t3.2xlarge)만  변경 가능
2. 컨버터블: 크기뿐만 아니라 인스턴스 유형이나 OS도 변경가능
3. 더 유연할수록 할인율이 낮다.
**결제 조건**
4. 전체 선결제: 전체 약정 기간에 대한 비용을 한번에 선결제 하는  방식으로 가장 할인율이 높다.
5. 부분 선결제:  일부 금액만 선결제하고 남은  금액은 시간당 요금을 지불
6. 선결제 없음: 계약 기간동안 시간당 요금을 지불하는 방식 할인율이 제일낮음(선결제없이쓰니)
7. 장기적으로  사용하면  이쪽이 비용을 아낀다.
