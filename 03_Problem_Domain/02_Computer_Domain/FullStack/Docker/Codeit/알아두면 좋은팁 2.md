## `ENV`와 `ARG` 비교

`ENV`와 `ARG`는 Dockerfile에서 변수를 선언할 수 있습니다. Dockerfile 수정 없이 값을 재정의 할 수 있죠. 하지만 몇 가지 차이점을 가집니다.

문법상 차이는 Dockerfile에서 변수를 선언할 때 `ARG`는 기본값을 할당하지 않아도 괜찮지만, `ENV`는 반드시 기본값을 초기화해야 합니다. 또, 값을 재정의할 수 있는 시점이 다릅니다. `ARG` 는 이미지를 빌드하는 시점에 `docker image build --build-arg` 옵션으로 정의할 수 있고, `ENV`는 컨테이너를 실행하는 시점에 `docker container run -e` 옵션으로 정의할 수 있습니다.
(이미지: arg 컨테이너: env)


마지막으로 가장 중요한 차이점은 변수의 생명주기입니다. `ARG`는 이미지를 빌드하는 동안에만 참조할 수 있고, 컨테이너가 실행되면 더 이상 참조할 수 없습니다. 반면 `ENV`는 이미지 빌드 시점부터 컨테이너 실행 후에도 계속해서 참조할 수 있습니다.
(라이프사이클:  ARG(IMGAE) -> | ENG(IMAGE) -> (CONTAINER START) -> (...))

따라서 빌드 시점에만 필요한 변수라면 `ARG`, 컨테이너 실행 후에 필요한 변수, 즉 환경 변수라면 `ENV`를 활용하는 것이 정확합니다.

## 변수참조팁
변수를 참조할때 `$VARIABLE`형식보다는 ${VARIABLE}형식으로 참조하는 것이 좋다.
이유
```Dockerfile
##  변수와 문자열을 바로 이어 붙이고자 하는 경우 혼란을 줄임
ENV VARIABLE=Hello
RUN echo "$VARIABLE_World"  
RUN echo "${VARIABLE}_World" 
```

두 번째 이유는 변수 값이 없는 경우 기본값을 설정해서 유연하게 대응할 수 있다는 점입니다. 
참조하는 변수 뒤에 콜론(`:`)과 `+` 또는 `-` 를 활용해 조건부 값을 정의가능
만약 `${VARIABLE:-Hi}` 이렇게 `VARIABLE`을 참조하면 `VARIABLE` 값이 있으면 해당 값을,
없으면 `Hi`라는 값을 대입

반대로 `${VARIABLE:+Hi}` 와 같이 변수를 참조하면 `VARIABLE` 값이 있으면 `Hi` 값을, 없으면 빈 값을 대입하게 됩니다.이런 이유로 변수를 참조할 때에는 `${VARIABLE}`과 같은 방식으로 참조하는 것을 권장