## AJAX
비동기 자바스크립트와 xml(요즘은 json형식을 많이사용)
- fetch함수: ES6표준에 소개, 쉽게 리퀘스트 , Promise기반
- axios: 패치와 비슷, 실무에 자주사용

## fetch기본 문법
```js
//fetch는 기본적으로 get리스폰스를 보낸다.
const res = await fetch('https..');
const data = await res.json(); // 바디내용은 json매서드를 이용할수있엇다.

const { results } = data;

console.log(res);
console.log(res.status); // response의 상태프로퍼티
console.log(res.headers); // response의 헤더프로퍼티
```

## 다양한 GET 리퀘스트 보내기
```js
// const res = await fetch('http.../?mbti=ISTJ') // 쿼리 파라미터 하나만 집어서 보여줄수있다.
/**  
	mbti, limit, offset
	주소 객체를 만들고
	서치파람에 offset값과 limit값을 넣고
	해당 객체를 패칭
	json으로 파싱해서 data변수에 넣어줌
*/
const url = await new URL('');
url.searchParams.append('offset', 10);
url.searchParams.append('limit', 10);

const res = await fetch(url);
const data = await res.json();

console.log(data);
```
>const res2 = await fetch('https://learn.codeit.kr/api/avatars/?offset=5&limit=10'
>처럼 쿼리파라미터를 사용할시 ?물음표 &앰퍼샌드 기호를 사용하는것

## POST 리퀘스트 보내기
```js
const surveyData = {
	mbti: 'ENFP',
	colorCode: '#ABCDEF',
	password: '0000',
}; //js객체이므로 서베에 보낼때는 json으로 변환해야함 (JSON.stringify)

const res = await fetch('...', {
	method: 'POST',
	body: JSON.stringify(surveyData),
	headers: { // 헤더 프로퍼티에 어떤 프로퍼티타입을 할건지 정해주는것이 좋다.
		'Content-Type': 'application/json',
	},
});

const data = await res.json();

console.log(data);
```
> surveyData같은 객체를 만들고 그것을 리퀘스트 바디에 넣어서 설문결과를 생성 생성된 결과가 화면으로 돌아오면 다시 리스폰스하면된다.

## API함수 만들기
```js
export async function getColorSurveys(params = {}) {
	const url = new URL('https://...');
	/*
	 예를 덜어
	 params에 { offset: 5, limit: 10}; 이 전달된다면
	 url.searchParams에 offset은5 limit은 10이 추가되는것이다.
	 */
	Object.keys(params).forEach((key) => {
		url.searchParams.appned(key, params[key])
	});
	
	const res = await fetch(url);
	const data = await res.json();
	return data;
}

export async function getColorSurvey(id) {
	const res = await fetch(`../${id}`)
	const data = await res.json();
	return data;
}

export async function createColorSurvey(survay) {
	const res = await fetch('...',{
		method: 'POST',
		body: JSON.stringify(surveyData),
		headers: {
			'Content-Type': 'application/json',
		},
	});
	const data = await res.json();
	return data;
}
```

```js
import {getColorSurveys, getColorSurvey, createColorSurvey } from './api.js';

const data = await getColorSurvey(10); 
console.log(data);

const surveyData = {
	mbti:...;
}
const data1 = await createColorSurvey(surveyData);
console.log(data1);
```

```js
//PATCH, DELETE method
export async function patchAvatar(id, avatarData) {
	const res = await fetch(`.../${id}`, {
		method: 'PATCH',
		...
	});
}
```
