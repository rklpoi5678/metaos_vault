## 오류처리하기
api문에서 try-catch문으로 감싸거나, 함수를 호출하는 부분에서 try-catch로 감싸면된다.
다만 에러status가 400이나 500일때는 Promise가 fulfiled상태가 되기떄문에 주의해야한다.
그래서 깔끔하게 할려면 상태코드로 오류를 처리하면된다.
```js
// status상태가 2로시작하면 true아니면 false를 반환
// 바디에 잘못된값이 들어와도 400이 되기에 오류가 발생하지않는데
// 이러한 상태 코드를 사용하면 성공적으로 막아낼수있다.
if(!res.ok) {
	throw new Error('데이터를 불러오는데 실패했습니다.');
}
```
> URL이 이상하거나, header자체가 잘못되거나, body가 유효하지 않다던가 -> 성공적으로 throw해줘야한다.
```js
if(!res.ok) {
	const message = await res.text(); // 문자열로 올경우
	//const message = await res.json(); // json으로 올 경우
	throw new Error(message);
	//throw new Error('데이터를 불러오는데 실패했습니다.');
}
```

## 웹 브라우저에서 리퀘스트 확인하기
Preseve log으로 기록을 남길수있고, Clear버튼으로 수동으로 지워버릴수있다.\

`fetch()`기본 문법
```js
const res = await fetch(url);

res.status; // 상태코드
res.headers; // 헤더

//리스폰스 바디
//에러 - 파싱에러
await res.json(); // JSON 문자열을 파싱해서 자바스크립트 객체로 변환
await res.text(); // 문자열을 그대로 가져옴
```

`URL`객체
```js
const params = { offset: 10, limit: 10};
const url = new URL('https://learn...');
Object.keys(params).forEach((key) => url.searchParams.append(key, params[key]));
const res = await fetch(url);
const data = await res.json();
console.log(data);
```

`fetch()`옵션
- method(메소드): `GET,POST,PATCH,DELETE` 같은 값으로 설정할수있다. `method`를 설정하지않을경우 기본값이 get
