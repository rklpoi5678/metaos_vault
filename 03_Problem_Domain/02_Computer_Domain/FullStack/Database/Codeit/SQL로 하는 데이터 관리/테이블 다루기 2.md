## 테이블에 CONSTRAINT 걸기 1
CONSTRAINT(제약사항): 이것을 걸면 테이블에 이상한 값이 오는것을 방지할수있다.
```sql
ALTER TABLE student
    ADD CONSTRAINT st_rule CHECK (registration_number < 30000000)
-- st_rule 이란 제약사항을 넣어주고(규칙) CHECK로 제약 사항을 넣어준다.

-- 
ALTER TABLE student DROP CONSTRAINT st_rule;
```

## 테이블에 CONSTRAINT 걸기 2 
```sql
ALTER TABEL student
	ADD CONSTRAINT st_rule
	CHECK (email LIKE '%@% AND gender IN ('m','f'))
```

## 그밖의 컬럼 관련 작업들
![[Pasted image 20250927220252.png]]
1. 컬럼 가장 앞으로 당기기
	1. pk가 컬럼 뒤에 있어 보기가 어색하다
```sql
ALTER TABLE player_info
	MODIFY id INT NOT NULL AOTO_INCREMENT FIRST;
```
![[Pasted image 20250927220350.png]]
> pk를 보통 맨앞에 두는게 일반적이다.

2. 컬럼 간의 순서 바꾸기
	1. role은 name보다 뒤에 나오는게 더 좋아보인다.
```sql
ALTER TABLE player_info
	MODIFY role CHAR(5) NULL AFTER name;
```
![[Pasted image 20250927220947.png]]
3. 컬럼의 이름과 컬럼의 데이터 타입 및 속성 동시에 수정하기
	1. 컬럼의 이름(RENAME COLUMN A TO B), 타입및 속성(MODIFY) 두가지성격을 한번에 해주는 작업 바로 CHANGE
	2. role컬럼 이름을 position으로 , 동시에 데이터타입을 VARCHAR(2) NOT NULL로 바꾸기
```sql
ALTER TABLE player_info
	CHANGE role position VARCHAR(2) NOT NULL;
```
여러 작업 동시에 수행하기
- id 컬럼을   registraion_number
- name type을  VARCHAR(30) NOT NULL
- position  컬럼을 데이블에서 삭제
- height,weight 컬럼 추가
```sql
ALTER TABLE player_info
	RENAME COLUMN id TO registraion_number,
	MODIFY name VARCHAR(30) NOT NULL,
	DROP COLUMN position,
	ADD height DOUBLE NOT NULL,
	ADD weight DOUBLE NOT NULL;
```
> 이런식으로 한번에 처리가능
또한 CHANGE절로 아래와같이가능하다
```sql
ALTER TABLE player_info
	CHANGE id registraion_number INT NOT NULL AUTO_INCREMENT,
	CHANGE name name VARCHAR(30)  NOT NULL,
	DROP COLUMN position,
	ADD height DOUBLE NOT NULL;
	ADD weight DOUBLE NOT NULL;
```

## 테이블 이름 변경,  복사본 만들기, 삭제
```sql
RENAME TABLE student TO undergraduate
-- student 테이블 이름을 undergraduate로 변경

-- undergraduate 를 복사 (테이블 복사)
CREATE TABLE copy_of_undergraduate AS SELECT * FROM undergraduate

--  drop table
DROP TABLE copy_of_undergraduate
```

## 테이블 컬럼 구조만 복사하기
```sql
--  undergraduate 와 똑같은 구조를 가진 컬럼이 복사된다.
CREATE TABLE copy_of_undergraduate LIKE undergraduate;

-- 두테이블의 컬럼 구조가 일치하므로
-- undergraduate의 행을 넣을수있다.
INSERT INTO copy_of_undergraduate SELECT * FROM undergraduate;

-- 만약 조건에 맞는 행들만 넣어주고 싶을경우 당연히
INSERT INTO copy_of_undergraduate 
	SELECT * FROM undergraduate
	WHERE major = 101;
-- 이런식으로 복사본에 특정 조건에 맞는 행들만 넣을수있다. 
```

## INSERT INTO 문과 서브쿼리
![[Pasted image 20250927225732.png]]
> SELECT 문이 전체 SQL문의  일부분으로 활용되고 있다. 이렇게 전체 SQL문에서 하나의 부품처럼 사용되는 슬랙트문을 서브쿼리라고 한다.
```sql
INSERT INTO  freshman SELECT * FROM undergraduate WHERE grade  = 1;
...
```
> 기존 테이블은 건들지 않고, 기존 테이블은 특정 row들만으로 새 테이블을 만들어야할때 사용하면 꽤 유용하다. 

## TRUNCATE으로 데이터 한 번에 날리기
```sql
-- 모든 테이블의 행들을 삭제하기
DELETE FROM final_exam_result;
-- 라고도 해도되지만
TRUNCATE final_examl_result;
-- 이렇게 하면 뼈대는 그대로 남지만 모든 row들이 삭제된것을 알수있다.
-- DELETE FROM 과 TRUNCATE final_exam_result;
-- 실행결과는 같지만 내부적으로 이루어지는 동작은 차이가있다. 
```