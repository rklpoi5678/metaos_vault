## 컬럼 정보를 한 눈에 보여주는 DESCRIBE
**테이블의 컬럼 구조, 각 컬럼의 데이터 타입 및 속성을 수정하는 법**
```sql
DESCRIBE undergraduate
-- 해당 테이블의 컬럼 구조, 각 컬럼의 데이터 타입, 속성을 볼 수 있다.
```
![[Pasted image 20250927205555.png]]
> 필드:  컬럼의 이름
> 타입: 컬럼의 데이터 타입
> 널:  컬럼의 널 속성 유무
> 키: 키 속성 여부
> 디폴트: 컬럼의 기본값
> 엑스트라: AUTO_INCREMENT등의 기타 속성
> 또한 DESCRIBE를 DESC라고 줄여 써도 된다.
>> 이 DESC는 어디에 쓰냐 당연히 의미(맥락)이 달라집니다.

## 컬럼 추가와 컬럼의 이름 변경
```sql
-- 컬럼 추가
ALTER TABLE student ADD gender CHAR(1) NULL;
-- CREATE TABLE에서 봤듯 컬럼이름 데이터타입 컬럼속성으로 student타입에 넣겠다(수정하겠다)는 의미이다.
-- ADD 말고 ADD COLUMN을 사용해도된다.
```
```sql
-- 컬럼 이름 변경
ALTER TABLE student RENAME COLUMN student_number TO registration_number;
-- RENAME 을 컬럼에다 할꺼고 해당 이름을 해당이름으로  변경하겠다.
```

## 컬럼 삭제와 컬럼의 데이터 타입 변경
```sql
ALTER TABLE student DROP COLUMN admission_date;
-- 해당 테이블에서 admission_date컬럼을 날려라

ALTER TABLE student MODIFY major INT;
-- modify는 수정하다 데이터타입 이나  속성을 변경할때 사용
-- 근데 원래 변경하기 전에 데이터가 문자열이라고 한다면 그냥 숫자형으로 변경하면 당연히 오류가 나온다. (이런건 미리 확인해봐야한다.)
-- 일단 각 컬럼들을 정수형으로 변환한뒤 넣어줘야한다. 또한 속성을  상속안받기에 INT NOL NULL같은 것도 다시써주면 매우 좋다.
UPDATE student SET major = 10 WHERE major =  '컴퓨터공학과';
UPDATE student SET major = 12 WHERE major =  '멀티미디어학과';
UPDATE student SET major = 7 WHERE major =  '법학과';
-- 이런식으로 업데이트로 문자열을 전공코드로 바꿀수있으며 이다음 ALTER문으로 데이터속성을 변경시킬수있다.
```
강의에서 문자형 기존 데이터를 정수형으로 바꾼 후 다시 컬럼 속성을 정수형으로 바꿔주셨는데, 왜 기존 데이터를 문자열에서 정수형으로 바꾸는 것은 허용이되는 건가요 (아직 컬럼 타입은 그대로 문자형인데)?
mysql 이 좀 이런 부분에 있어서 엄격하지 않은 편입니당. 상황에 맞게 최대한 오류를 발생하지 않도록 내부적으로 처리를 하는 것으로 보여용.

대신 strict sql mode([https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html#sql-mode-strict](https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html#sql-mode-strict)) 에선 이런 부분들이 제한될 것입니당.

## 혹시 UPDATE가 안되는 분이라면
```sql-error(mySQL_Workbench)
**Error Code: 1175. You are using safe update mode and you tried to update a table without a WHERE that uses a KEY column. To disable safe mode, toggle the option in Preferences -> SQL Editor and reconnect.**
```
> 'safe update모드'를 사용중일때 KEY column을 사용해서 테이블을 갱신해야 한다는 뜻이다. 여기서 키 컬럼이란 PK를 의미
```sql
-- 말그대로 안전한 갱신을 보장하기 위한조건
UPDATE student SET major = 10;
-- 처럼 모든 row 의 특정 컬럼을 갱신해버리는 SQL문이나
UPDATE student SET major =  10 WHERE major = '컴퓨터공학과';
```
> 처럼 WHERE 절에 Primary key가 사용되지 않는 UPDATE문이 실행되지않도록함

이러한 UPDATE문을 주의깊게 사옹하지않아 위험한 결과를 방지하기위한 DBMS상의 모드이다.
에디터 설정에서 safe updates라고 체크된부분을 꺼주면 에러가 안납니다.
이렇게 dBMS의 특정모드가 어떻게 설정되어있느냐에 따라 같은 SQL문이라도 그 실행 결과가 달라질 수 있다는 점은 기억해둔다.

## 컬럼에 NOT NULL 속성 추가
```sql
ALTER TABLE student MODIFY name VARCHAR(20) NOT NULL;
```

## 컬럼에 DEFAULT 속성 추가
컬럼에 기본적으로 기본값을 주지않으면 NULL이다.
```sql
-- 기본적으로 기본값을 주는것은 비슷하다. (101의 기본값넣기)
-- 값이 들어가지 않아도 원하는 기본값이 있다면 디폴트값을 설정해주면된다.
ALTER TABLE student MODIFY major INT NOT NULL DEFAULT 101;
```

## DATETIME,  TIMESTAMP 타입의 컬럼에 값을 넣는 2가지 방식
갱신 시각이 추가되어야할때가 있다.
- 게시물 업로드 시각
- 댓글이 달린 시각
- 댓글을 수정한 시각
동의정보가 그예이다ㅏ.

1. NOW()함수 사용
	1. upload_time, recent_modified_time에 NOW()기본값을 넣는다.
	2. 최초업로드이후 다시 수정이되었다면 recent_modified_time을 set해서 now로 다시넣어주면 그 수정된 날짜가 나오겠지요
2. 컬럼에 DEFAULT CURRENT_TIMESTAMP / ON UPDATE CURRENT_TIMESTAMP 속성 설정하기
	1. DATETIME type or TIMESTAMP type 컬럼엔
	2. DEFAULT CURRENT_TIMESTAMP, ON UPDATE CURRENT_TIMESTAMP라는 속성을 줄수있다.
	3. ![[Pasted image 20250927214123.png]]
	4. 그러면  INSERT 되었을때 값을 주지않아도 두값이 자동으로 잘들어갈것이다.

시간값에 관한 처리를 다르게 해줘야하는 경우라면 NOW 함수를 쓰는 게 좋다.
굳이 날짜/ 시간 값을 별도로 신경쓰기가 싫다면 해당 컬럼에 속성을 설정해서 DBMS가 알아서 관리하도록 하는게 좋다.

## 컬럼에 UNIQUE 속성 주기
```sql
-- registration_number 테이블값에 중복된 값을  넣어서 유니크속성을 한방에 알아보자
# 영상에서 배운 SQL문을 입력하고 실행해보세요
ALTER TABLE student MODIFY registration_number INT NOT NULL UNIQUE;



/* 아래의 INSERT 문이 실행될 때
Duplicate entry '20112405' for key 'student.registration_number'
에러가 나는 게 정상입니다 */
INSERT INTO student (name, registration_number) VALUES ('최태웅', 20112405);
```

## 