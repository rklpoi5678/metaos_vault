## GROUP BY로 그루핑해서 보기  1
disctint랑 다른점은 group by는  나눠도 그룹으로 묶여서 각각안에 값들이 들어있는 상태이다.
그룹별로 카운트를 먹일수있다.
집계함수는 : 그루핑을 통해 생성된 각 그룹의 수치적인 특성을 구하는 함수이다.
그룹바이로 필드를 그룹화했다면 집계함수로 그 그룹을의 총계수를 구할수도있게되는것이다.

## GROUP BY로 그루핑해서 보기  2
```sql
select SUBSTRING(address, 1, 2) as region, COUNT(*)
from member 
group by
SUBSTRING(address, 1,2),
gender;
```
> 조금더 세부적인 그룹으로 나눌수있다 예를들어 서울안에사는 남성 여성 이런식으로

## HAVING으로 그루핑에 조건 설정하기
```sql
select 
SUBSTRING(address, 1, 2) as region, 
gender,
COUNT(*)
from member 
group by
SUBSTRING(address, 1,2),
gender
having region = '서울' AND gender = 'm'
order by region ASC gender DESC;
```
> having은 조회된 데이터를 그룹핑했을때의 조건을 설정할수있고
> where은 조회된 데이터를 그룹핑하지않을때의 조건을 설정
> 깔끔하게 보기위해서 그룹을 정렬시키는것이 좋다.

## GROUP BY를 사용할 때 주의점
그룹피을 사용하지 않은 컬럼이 select절에 존재하면 안된다 다만 집계함수를 넣으면 사용할수있다.
group by시 그룹핑되지 않는 컬럼을 단독으로 쓰면 허용되지 않지만, AVG(age)처럼 집계 함수의 인자를 사용하는것은 가능하다.

각 그룹의 age의 값(평균값,맥스값) 등을 계산하기 때문이다.

## SELECT문의 실행 순서
**SQL문의 작성 순서**
1. SELECT
2. FROM
3. WHERE
4. GROUP BY
5. HAVING
6. ORDER BY
7. LIMIT

**SQL문의 실행 순서**
어느 테이블인지 -> 어떤 특정  조건을 만족하는지 행만 선별 -> 로우들을 그룹핑, 하나의 그룹은  하나의 로우로 표현 -> 여러 그룹들중 특정 조건을 만족하는 그룹들만 선별 -> 조회할 컬럼들을 선택 -> 각 로우를 특정 기준에 따라 정렬 -> 이전 단계까지 조회된 로우 중 일부만을  추린다.