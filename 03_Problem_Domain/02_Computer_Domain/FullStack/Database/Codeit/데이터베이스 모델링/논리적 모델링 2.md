##  카디널리티
개체 A와 B사이에 몇개가 연결됭수있는가
일대일, 일대다, 다대다
어떤 관계가 있는지에 따라 바뀐다.

**1:1**
법적 부부 관계, 주민등록증(주민등록증은 한시민만의 내용)
**1:N**
유저는 여러개의 평가를 할수있다(다만 평가는 하나의 유저에 속한다),
**M/N**
찜하기 기능, 학생과 수업의 관계(하나의 여러개 수업, 수업도 여러명을 들을수있다.)

카디널리티 파악하기
페이스북은 : 하나의 유저가 하나의 프로필
넷플릭스는: 하나의 유저가 여러개의  프로필
다른서비스는: 하나의 유저도 프로필도 여러개의 관계가 있을수도있다.

##  카디널리티   ERM 에서 표현하기
![[Pasted image 20251001154853.png]]
![[Pasted image 20251001154925.png]]
![[Pasted image 20251001155005.png]]
최소 카디널리티
- 최대  몇개가 연결될 수 있는지를 표현한 것이다.
카디널리티 정하기
- 어떤 개체를 사용하는 지보다. 개체를  어떻게 사용하고 싶은지에 따라 결정된다. 해당  회사의  비즈니스 룰을 사용해서 알아낸다. 비즈니스 룰을 정확하게 파악한 후 이걸 바탕으로 카디널리티를 찾아낼 수 있다.

ERD
표현한 ERM을 가끔씩 Entity  Relationship Digram중려서 이알디 라고 표현하기도 한다.

## 일대일, 일대다 관계 모델링
만약 유저가 무조건 카드가 있어야만 할 떄는 유저 테이블에 foreign key를 넣어도 된다.
일대다에서 다에 해당하는 개체에 foreign key 를 추가한다.

## 다대다 관계 모델링
정션 테이블(연결 테이블) 새로운 개체  + 두 개의 일대다 관계로 모델링한다.
다대다 관계에서는 동사도 개체 후보가 될 수 있다.

## 관계와 조인
조인이란?
관계를  활용하여  두 엔티티의 데이터를 결합하여 새로운 정보를 만드는 프로세스이다.

계층형 구조와 셀프조인
셀프조인은 하나의 테이블을 자기 자신과 조인하여 사용한다. 셀프 조인은 한 테이블 내의 레코드가 동일한 테이블의 다른 레코드와 연결되는 경우에 사용ㅎ나다.
직원 테이블에서 각 직원의 상사를 찾기 위해 셀프 조인을 사용할수도있다.

## 모델이 표현하는 트랜젝션의 이해
식별관계: 부모 pk가 자식에서도 기본 키의 일부로 사용되는 관계를 의미한다.
학생 엔터티의 학생  아이디가 성적  엔터티에서도 기본 키로 사용되는경우, 성적은 학생 ㅇ 벗이는 존재할수없는 강한 연결 관계에 있다.

비식별관계: 부모 키가 자식 엔터티로 전달되지만, 자식 엔터티의 주요 키로 사용되지 않고 외래 키로만 사용되는 관계를 의미한다. 자식  엔터티는 부모 엔터티와  관계를 맺고 있지만 자체적으로 독립적인 실체로 존재할수있다.

학생 학생 아이디가 도서 대출 엔터티에  외래 키로 존재하지만, 도서 대출 앤터티의 기본 키는 아니다. 도서 대출은 학생과 느슨한 연결 관계에 있다.
즉 비식별관계는 엔티티 간의 연결을 유지하면서도 각각의  독립성을 보장하는 관계라고  이해

**강한 개체와 약한 개체**
개체 자체의 독립성에 포커스
강한 개체
- 자체적, 독립적인 엔티티 , 학생은  키와 이름을 가지고있다.
약한 개체
-  강한 개체없이는 존재할수없는 의존적인 엔티티

식별 관계와 비식별관계는 테이블 간의 관계 정의에 초점을 맞춘 것이고, 강한 개체와  약한 개체는  엔터티 자체의 독립성에 대한 것이다.

**트랜잭션과의 연관성**
모두 성공적이거나 하나라도 실패할경우 전체 작업이  취소되어야하는경우
은행 계좌 이체는 하나의 트랜잭션, 식별관계에서는 부모 개체의 레코드가 삭제되거나 변경될 때, 이와 연결된 자식 엔터티의 레코드에도 영향을 미친다.
반면 비식별관계는 부모 레코드가 삭제되고 자식 엔터티의 레코드에 직접적인 영향을 미치지 않을 수 있다.
-> 이경우 부모의 레코드 변경과 자식 엔터티의 레코드 변경을 별개의 트랜잭션으로 처리할수있다.
