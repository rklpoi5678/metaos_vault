## ref로  DOM 노드 가져오기
원하는 시점에 돔노드에 접근하고 싶을때 ref를 사용한다. 프롭
```jsx
import { useRef } from 'react';

function FileInput({name, value, onChange}) {
	// 특정 DOM요소를 선택하는 요소를 말하낟.
	// 현재 섹션에서는 input type=file에 해당하는 fileInput이 ref
	// 즉, 하단 리턴 인풋에 참조한다 inputRef를 useRef 리액트 사용이다.
	const inputRef = useRef();
	const handleChange = (e) => {
		const nextValue = e.target.files[0];
		onChange(name, nextValue);
	};
	
	useEffect(() => {
		// ref를 쓰면 실제 돔노드를 참조할수있다.
		// dom node는 반드시 렌더링이 끝나야 생기는거니
		// ref의 컴포넌트 값도 화면이 렌더링이 되었을때 존재하는것
		// 조건부를 사용해서 렌더링하면 이값이 없을수도 있다.

		// 그래서 항상 인풋값에 렌더링값이 있을때 사용하는 것을  추천한다.
		if(inputRef.current) {
			console.log(inputRef.current)
		}
		// console.log(inputRef);
	}, []);
	
	return <input type="file" onChange={handleChange} ref={inputRef} />;
}

export default FileInput;
```

##  파일 인풋 초기화
파일 인풋의 밸류속성은 사용자만 바꿀수있고, 자바스크립트로 바꿀떄는 빈문자열로만 바꿀수있다는것
밸류속성을 빈문자열로 바꾸면 선택한 속성을 초기화시킬수있다.
```jsx
import { useRef } from 'react';

function FileInput({name, value, onChange}) {
	// 특정 DOM요소를 선택하는 요소를 말하낟.
	// 현재 섹션에서는 input type=file에 해당하는 fileInput이 ref
	// 즉, 하단 리턴 인풋에 참조한다 inputRef를 useRef 리액트 사용이다.
	const inputRef = useRef();
	const handleChange = (e) => {
		const nextValue = e.target.files[0];
		onChange(name, nextValue);
	};
	
	useEffect(() => {
		// ref를 쓰면 실제 돔노드를 참조할수있다.
		// dom node는 반드시 렌더링이 끝나야 생기는거니
		// ref의 컴포넌트 값도 화면이 렌더링이 되었을때 존재하는것
		// 조건부를 사용해서 렌더링하면 이값이 없을수도 있다.

		// 그래서 항상 인풋값에 렌더링값이 있을때 사용하는 것을  추천한다.
		if(inputRef.current) {
			console.log(inputRef.current)
		}
		// console.log(inputRef);
	}, []);
	
	//버튼에 쓸 함수
	const handleClearClick = () => {
		// inputRef.current 의 값을 inputNode로 할당
		const inputNode = inputRef.current;
		// inputNode가 없다면 작동을 안시밈	(방어 코드)
		if(!inputNode) return;
		// 인풋노드를 일단 초기화
		inputNode.value = '';
		// 이러면 부모 컴포넌트의 값이 null로 변경이 된다.
		onChange(name, null);
	}
	
	return (
	<div>
		<input type="file" onChange={handleChange} ref={inputRef} />;
		{/* 밸류 속성이 있을때만 초기화 할것이다. */}
		{value && <button onClick={handleClearClick}>X</button>}
	</div>
	)
}

export default FileInput;
```

**Ref  객체 생성**
```jsx
import { useRef } from 'react';

// ...

const ref = useRef();
```
> useRef  함수로 Ref객체 만들기 (돔노드 참조j)

**ref Prop사용하기**
```jsx
const ref = useRef();

// . ..

<div ref={ref} > ... </div>
```
>  ref prop에다 앞에서 만든 Ref 객체를 내려준다. (해당 돔이 연결되면서  돔정보를 참조)

**Ref 객체에서 DOM노드 참조하기**
```jsx
const node = ref.current;
if(node){
	// node 를 사용하는 코드
}
```
> ref객체에서 current라는 프로퍼티를  사용하면 DOM 노드를 참조할수있었다.
> !!! current값은 없을 수도 있으니 반드시 값이 존재하는지 검사하고 사용한다는 점!!!

예시: 이미지 크기 구하기
```jsx
import { useRef } from 'react'

function Image({ src }) {
	const imgRef = useRef();
	
	const handleSizeClick = () => {
		const imgNode = imgRef.current;
		if(!imgNode) return;
		
		const { width,  height } = imgNode;
		console.log(`${width} x ${height}`);
	};
	
	return (
		<div>
			<img src={src} ref={imgRef} alt="크기를 구할 이미지" />
			<button onClick={handleSizeClick}>크기 구하기</button>
		</div>
	)
}
```
> img노드의 크기를 ref를 활용하여 출력하는 예시이다./
> img 노드에는 너비 값인 width와 높이 값이인 height라는 속성
> ref  객체의 current 로 dom 노드를 참조해서 두 속성 값을 가져왔다.

## 이미지 파일 미리보기
파일 객체를 Object Url로 만들면 미리보기를 만들수있습니다.
```jsx
import { useRef, useState } from 'react';

function FileInput({name, value, onChange}) {
	const [preview, setPreview] = useState();
	

	useEffect(() => {
	// vlaue 값이 바뀔때마다 프리뷰값을 변경시킬수있다.
	// value값이 없을수 있으니 그럴떄는 종료
		if (!valeu) return;	

	/**
		URL 의 주소는 문자열로 해당값의 주소를 문자열로 쓸수있다.
		returns { String }	
	*/
		const nextPreview = URL.createObjectURL(value);	
		setPreview(nextPreview);
		// 살펴보면 blob로 시작되는 
	}, [value])
	
	return (
		<div>
			<img src={preview} alt="크기를 구할 이미지" />
			<input type="file" onChange={handleChange} ref={inputRef} />
			<button onClick={handleSizeClick}>크기 구하기</button>
		</div>
	)
}
```