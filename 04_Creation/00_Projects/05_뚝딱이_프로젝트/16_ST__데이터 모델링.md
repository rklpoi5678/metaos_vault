
## 핵심

### 테이블 명 Users
목적: 서비스에 가입한 사용자 정보를 저장 Clerk 과 연동하므로 Clerk이 관리하는 핵심 인증 정보(비밀번호,소셜 로그인 등)외에 '뚝딱이' 서비스 운영에 필요한 추가 정보를 저장

| 컬럼명                 | 데이터타입           | 설명                                                             | 비고                                                                                                      |
| ------------------- | --------------- | -------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| id                  | uuid            | clerk의 id와 동일하게 아니면 별도로 생성후 clerk_user_id와 연결                  | PK                                                                                                      |
| clerk_user_id       | `VARCHAR(255)`  | Clerk에서 제공하는 사용자 고유 ID. `뚝딱이` 사용자 계정과 Clerk 계정을 연결하는 핵심 컬럼입니다. | UNIQUE, NOT NULL                                                                                        |
| email               | `VARCHAR(255)`  | 사용자의 이메일 주소. (Clerk에서 가져옴)                                     | **UNIQUE, NOT NULL**, 로그인 시 편리한 조회를 위함                                                                  |
| name                | `VARCHAR(255)`  | 사용자의 이름 또는 닉네임. (Clerk에서 가져오거나 초기 가입 시 입력)                     | `NULL` 허용 가능                                                                                            |
| `profile_image_url` | `VARCHAR(2048)` | 프로필 이미지 URL (선택 사항)                                            | `NULL` 허용 가능                                                                                            |
| current_plan_id     | UUID            | 현재 사용자가 구독 중인 플랜의 ID. `plans` 테이블의 FK (Foreign Key).           | `NULL` 허용 (초기 가입 시에는 기본 'Free' 플랜의 ID로 초기화하거나, `null`로 두고 `subscriptions` 테이블에서만 관리할 수도 있습니다. 후자가 더 유연) |
| created_at          | TIMESTAMPTZ     | 계정 생성 일시 (타임존 정보 포함).                                          | **NOT NULL**, `DEFAULT NOW()`                                                                           |
| updated_at          | TIMESTAMPTZ     | 마지막 정보 수정 일시.                                                  | `DEFAULT NOW()`                                                                                         |
| last_login_at       | TIMESTAMPTZ     | 마지막 로그인 일시.                                                    | `NULL` 허용                                                                                               |
### 테이블 명 Plans
목적: '뚝딱이' 서비스에서 제공하는 구독 플랜의 종류와 각 플랜의 속성(가격, 기능 제한 등)을 정의

| 컬럼명                       | 데이터타입           | 설명                                                         | 비고                                         |
| ------------------------- | --------------- | ---------------------------------------------------------- | ------------------------------------------ |
| id                        | uuid            | 플랜 고유 ID.                                                  | PK                                         |
| name                      | `VARCHAR(100)`  | 플랜 이름 (예: 'Free', 'Premium Monthly', 'Premium Annually')   | **UNIQUE, NOT NULL**                       |
| description               | TEXT            | 플랜에 대한 설명                                                  | `NULL` 허용                                  |
| price_amount              | `DECIMAL(10,2)` | 플랜 가격. (예: 4900.00)                                        | **NOT NULL** (무료 플랜은 0)                    |
| `currency`                | `VARCHAR(10)`   | 통화 (예: 'KRW', 'USD')                                       | **NOT NULL**                               |
| `billing_interval`        | `VARCHAR(20)`   | 결제 주기 (예: 'month', 'year', 'lifetime', 'one_time', 'free') | **NOT NULL**                               |
| max_projects              | INTEGER         | 생성 가능한 최대 프로젝트 수 (예: Free=3, Premium=NULL(무제한))            | **`NULL` 허용                                |
| `max_mockups_per_project` | INTEGER         | 프로젝트 당 최대 목업 수 (예: Free=10, Premium=NULL(무제한))             | `NULL` 허용                                  |
| has_watermark             | BOOLEAN         | 목업 내보내기 시 워터마크 포함 여부 (True = 워터마크 있음)                      | **NOT NULL** (예: Free=True, Premium=False) |
| allow_ai_features         | BOOLEAN         | AI 기능 사용 가능 여부                                             | **NOT NULL** (예: Free=False, Premium=True) |
| allow_code_export         | BOOLEAN         | 코드 내보내기 기능 사용 가능 여부                                        | **NOT NULL** (예: Free=False, Premium=True) |
| is_active                 | BOOLEAN         | 플랜 활성화 여부 (판매 중단된 플랜 관리)                                   | **NOT NULL**, `DEFAULT TRUE`               |
| created_at                | TIMESTAMPTZ     |                                                            | **NOT NULL**, `DEFAULT NOW()`              |
| updated_at                | TIMESTAMPTZ     |                                                            | `DEFAULT NOW()`                            |

### 테이블 명 Subscriptions
목적: 각 사용자가 현재 어떤 구독 플랜을 사용하고 있는지, 구독의 시작/종료일, 결제 상태 등을 관리합니다.

